import discord
from UserInterface import UI_Discord
import random
from discord.ext import commands


class User(commands.Cog):

    def __init__(self, bot):
        self.bot = bot

    @commands.Cog.listener()
    async def on_ready(self):
        """–±–æ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω"""
        print("Boris connected!")

    @commands.command()
    async def dice(self, ctx):
        """–±—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞"""
        author = ctx.message.author
        dice1 = random.randint(1, 6)
        await ctx.send(f'{author.mention} –≤—ã–±—Ä–æ—Å–∏–ª {dice1} üé≤')

    @commands.command()
    @commands.has_permissions(administrator=True)
    async def clear(self, ctx, *, amout):
        """–æ—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞"""
        lim = int(amout)
        await ctx.channel.purge(limit=lim)

    @commands.command()
    async def author(self, ctx):
        """–æ–± –∞–≤—Ç–æ—Ä–µ"""
        await ctx.send(components=[UI_Discord.BtnAut])

    @commands.command()
    @commands.has_permissions(administrator=True)
    async def kick(self, ctx, member: discord.Member, *reason):
        """–∫–∏–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"""
        await ctx.send(f'{member} –∫–∏–∫–Ω—É—Ç –ø–æ –ø—Ä–∏—á–∏–Ω–µ {reason}')
        await member.kick()

    @commands.command()
    @commands.has_permissions(administrator=True)
    async def ban(self, ctx, member: discord.Member, *reason):
        """–±–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"""
        await ctx.send(f'{member} –∑–∞–±–∞–Ω–µ–Ω –ø–æ –ø—Ä–∏—á–∏–Ω–µ {reason}')
        await member.ban()

    @commands.command()
    async def getrole(self, ctx, role: discord.Role):
        """–ø–æ–ª—É—á–µ–Ω–∏–µ id —Ä–æ–ª–∏"""
        if ctx.author.id == 299829027571761153:
            await ctx.send(role.id)
        else:
            await ctx.send("You don`t have permmision")

    @commands.command()
    async def server(self, ctx):
        """–ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–≤–µ—Ä–µ"""
        embed = discord.Embed(
            description=f'**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ** **{ctx.guild.name}**\n'
                        f'\n'
                        f'**–£—á–∞—Å—Ç–Ω–∏–∫–∏:**\n'
                        f'–õ—é–¥–µ–π: **{ctx.guild.member_count}**\n'
                        f'\n'
                        f'**–ö–∞–Ω–∞–ª—ã:**\n'
                        f'üí¨ –¢–µ–∫—Å—Ç–≤—ã–µ: **{len(ctx.guild.text_channels)}**\n'
                        f'üîä –ì–æ–ª–æ—Å–æ–≤—ã–µ: **{len(ctx.guild.voice_channels)}**\n'
                        f'‚ñ∂  –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: **{len(ctx.guild.categories)}**\n'
                        f'\n'
                        f'**–í–ª–∞–¥–µ–ª–µ—Ü:**\n'
                        f'{ctx.guild.owner}\n'
                        f'\n'
                        f'**–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–≤–µ—Ä–∫–∏:**\n'
                        f'{ctx.guild.verification_level}\n'
                        f'**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:**\n{ctx.guild.created_at.strftime("%d.%m.%Y")}\n',
            color=ctx.author.color, )
        embed.set_footer(text=f'ID: {ctx.guild.id}')
        embed.set_thumbnail(url=str(ctx.guild.icon_url))
        await ctx.send(embed=embed)

    @commands.command()
    async def help(self, ctx):
        """–∫–æ–º–∞–Ω–¥–∞ –ø–æ–º–æ—â–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"""
        embed = discord.Embed(
            description=
            f'\n'
            f'**–ö–æ–º–Ω–∞–¥—ã:**\n'
            f'>server - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ\n'
            f'>ban [–Ω–∏–∫] [–ø—Ä–∏—á–∏–Ω–∞] - –±–∞–Ω —É—á–∞—Å—Ç–Ω–∏–∫–∞\n'
            f'>kick [–Ω–∏–∫] [–ø—Ä–∏—á–∏–Ω–∞] - –∫–∏–∫ —É—á–∞—Å—Ç–Ω–∏–∫–∞\n'
            f'>dice - –±—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞\n'
            f'>clear [—á–∏—Å–ª–æ] - –æ—á–∏—Å—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª–µ \n'
            f'>song [—Å—Å—ã–ª–∫–∞ —Å —é—Ç—É–±–∞] - –ø—Ä–æ–∏–≥—Ä—ã—à –º—É–∑—ã–∫–∏\n'
            f'>stop - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º—É–∑—ã–∫–∏\n'
            f'>create_private - —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏',
            —Åolor=ctx.author.color)
        await ctx.send(embed=embed)


def setup(bot: commands.Bot):
    bot.add_cog(User(bot))
